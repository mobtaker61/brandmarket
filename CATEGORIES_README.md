# ساختار دسته‌بندی محصولات - Brand Manager

## معرفی

سیستم دسته‌بندی محصولات در Brand Manager به صورت سلسله‌مراتبی طراحی شده است. این ساختار امکان مدیریت دسته‌های اصلی (مادر) و زیرگروه‌ها را فراهم می‌کند.

## ساختار دیتابیس

### جدول `product_categories`

| فیلد | نوع | توضیحات |
|------|-----|---------|
| `id` | bigint | شناسه یکتا |
| `name` | string | نام دسته |
| `slug` | string | slug برای URL |
| `description` | text | توضیحات دسته |
| `icon` | string | آیکون دسته (emoji) |
| `color` | string | رنگ دسته |
| `parent_id` | bigint | شناسه دسته والد |
| `sort_order` | integer | ترتیب نمایش |
| `is_active` | boolean | فعال/غیرفعال |
| `created_at` | timestamp | تاریخ ایجاد |
| `updated_at` | timestamp | تاریخ بروزرسانی |

## دسته‌های پیش‌فرض

### 1. مواد غذایی و نوشیدنی 🍽️
- **زیرگروه‌ها:**
  - شکلات و شیرینی 🍫
  - قهوه و نسکافه ☕
  - نوشابه و آبمیوه 🥤
  - پنیر و لبنیات 🧀
  - سس و ادویه 🌶️
  - محصولات ارگانیک 🌱

### 2. لوازم آرایشی و بهداشتی 💄
- **زیرگروه‌ها:**
  - کرم پوست 🧴
  - ضدآفتاب ☀️
  - شامپو و نرم‌کننده 🧴
  - عطر و ادکلن 🌸
  - ریمل و رژ 💋
  - محصولات بهداشت دهان 🦷

### 3. پوشاک و کفش 👕
- **زیرگروه‌ها:**
  - پوشاک زنانه 👗
  - پوشاک مردانه 👔
  - پوشاک بچه‌گانه 👶
  - کیف 👜
  - کفش 👠
  - پوشاک ورزشی 🏃
  - لباس زیر 👙

### 4. لوازم خانه و آشپزخانه 🏠
- **زیرگروه‌ها:**
  - ظروف کریستال و چینی 🍽️
  - سرویس قابلمه 🍳
  - لوازم دکوری 🖼️
  - مایکروویو 📺
  - قهوه‌ساز ☕
  - جاروبرقی 🧹

### 5. دیجیتال و الکترونیک 📱
- **زیرگروه‌ها:**
  - موبایل 📱
  - تبلت 📱
  - لپ‌تاپ 💻
  - مانیتور 🖥️
  - پاوربانک 🔋
  - هدفون 🎧
  - اسمارت واچ ⌚

### 6. لوازم خودرو 🚗
- **زیرگروه‌ها:**
  - روغن موتور 🛢️
  - لاستیک 🛞
  - باتری 🔋
  - لوازم یدکی 🔧
  - فیلتر 🧽
  - باند و پخش خودرو 🎵

### 7. محصولات ورزشی و کمپینگ ⚽
- **زیرگروه‌ها:**
  - کفش دویدن 👟
  - پوشاک باشگاه 🏃
  - دمبل و هالتر 🏋️
  - دوچرخه 🚲
  - چادر مسافرتی ⛺
  - کوله کمپ 🎒

### 8. کودک و نوزاد 👶
- **زیرگروه‌ها:**
  - شیرخشک 🍼
  - پوشک 👶
  - وسایل تغذیه 🥄
  - کالسکه 🚼
  - اسباب‌بازی آموزشی 🧸

### 9. لوازم تحریر و اداری 📝
- **زیرگروه‌ها:**
  - خودکار و دفتر ✏️
  - پرینتر 🖨️
  - صندلی اداری 🪑
  - تجهیزات بایگانی 📁

### 10. لوازم ساختمانی و ابزار 🔨
- **زیرگروه‌ها:**
  - رنگ و چسب 🎨
  - ابزار برقی ⚡
  - پیچ‌گوشتی و دریل 🔧
  - شیرآلات 🚰
  - لامپ 💡

### 11. محصولات دارویی و مکمل‌ها 💊
- **زیرگروه‌ها:**
  - مولتی‌ویتامین 💊
  - مکمل بدنسازی 💪
  - داروهای OTC 🏥

### 12. حیوانات خانگی 🐕
- **زیرگروه‌ها:**
  - غذای سگ و گربه 🐾
  - اسباب‌بازی حیوانات 🎾
  - قلاده و باکس حمل 🦮

## API Endpoints

### دریافت دسته‌های اصلی
```http
GET /api/categories
```

### دریافت زیردسته‌ها
```http
GET /api/categories/{category}/subcategories
```

### مدیریت دسته‌ها
```http
GET    /categories              # لیست دسته‌ها
POST   /categories              # ایجاد دسته جدید
GET    /categories/create       # فرم ایجاد
GET    /categories/{id}         # نمایش دسته
GET    /categories/{id}/edit    # فرم ویرایش
PUT    /categories/{id}         # بروزرسانی
DELETE /categories/{id}         # حذف
```

## ویژگی‌های کلیدی

### 1. ساختار سلسله‌مراتبی
- امکان ایجاد دسته‌های اصلی و زیرگروه‌ها
- پشتیبانی از چندین سطح عمق
- نمایش مسیر کامل دسته

### 2. مدیریت بصری
- آیکون‌های emoji برای هر دسته
- رنگ‌بندی شخصی‌سازی شده
- ترتیب نمایش قابل تنظیم

### 3. روابط با برندها
- هر برند می‌تواند به یک دسته تعلق داشته باشد
- شمارش تعداد برندها در هر دسته
- فیلتر برندها بر اساس دسته

### 4. API Integration
- API کامل برای Alpine.js
- پشتیبانی از AJAX requests
- پاسخ‌های JSON ساختاریافته

## نحوه استفاده

### 1. ایجاد دسته جدید
```php
$category = ProductCategory::create([
    'name' => 'نام دسته',
    'description' => 'توضیحات',
    'icon' => '🍽️',
    'color' => '#FF6B6B',
    'parent_id' => null, // برای دسته اصلی
    'sort_order' => 1
]);
```

### 2. ایجاد زیردسته
```php
$subcategory = ProductCategory::create([
    'name' => 'نام زیردسته',
    'parent_id' => $category->id,
    'sort_order' => 1
]);
```

### 3. دریافت دسته‌های اصلی
```php
$mainCategories = ProductCategory::mainCategories()
    ->with('children')
    ->active()
    ->ordered()
    ->get();
```

### 4. دریافت مسیر کامل
```php
$fullPath = $category->full_path; // "دسته اصلی > زیردسته"
```

## مزایای این ساختار

1. **انعطاف‌پذیری** - امکان ایجاد هر تعداد دسته و زیردسته
2. **سازماندهی** - دسته‌بندی منطقی و منظم
3. **قابلیت جستجو** - فیلتر آسان بر اساس دسته
4. **تحلیل** - امکان تحلیل برندها بر اساس دسته
5. **تجربه کاربری** - ناوبری آسان و بصری

## مراحل بعدی

1. اضافه کردن ویژگی‌های پیشرفته مانند:
   - دسته‌های چندگانه برای هر برند
   - تگ‌های اضافی
   - فیلترهای پیشرفته

2. بهبود UI/UX:
   - Drag & Drop برای ترتیب
   - ویرایشگر بصری
   - پیش‌نمایش دسته‌ها

3. تحلیل‌های پیشرفته:
   - آمار برندها در هر دسته
   - روند رشد دسته‌ها
   - مقایسه دسته‌ها 
